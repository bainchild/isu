local a=typeof or type;local b=coroutine.running;local c=Instance.new;local pairs=pairs;local d=getmetatable;local e=setmetatable;local f=game:GetService("TweenService")local g={}local h={}local i={__mode='k'}local j={__mode='v'}local k={__mode='kv'}local function l(m)return e({v=m},j)end;local function n(o,p)local q={}for r,s in pairs(o)do local t,u=r,s;if a(r)=='table'and p then t=n(r,p)end;if a(s)=='table'and p then u=n(s,p)end;q[t]=u end;return q end;local function v()local w={stack={},coro=e({},k)}function w:at(x)return self.stack[x]end;function w:write(x,m)self.stack[x]=m end;function w:push(m)self.stack[#self.stack+1]=m;return m end;function w:reset()self.coro[b()]=0 end;function w:next()local y=b()self.coro[y]=self.coro[y]+1;return self:at(self.coro[y]),self.coro[y]end;return w end;local function z(A,B)B=B or b()h[B]=A;return h[B]end;local function C(B)B=B or b()return h[B]end;local function D(E,F,...)local G=C()z(E)local H=F(...)z(G)return H end;local I;do local function J(K,L)local M=c(K)for r,s in pairs(L)do if a(r)=='number'then s().Parent=M else if a(s)=='table'and d(s)and d(s).__type=='Subscription'then M[r]=s.value else M[r]=s end end end;return M end;function I(K,L)local E=C()local N=E.objects:next()if not N then L=L or{}N=J(K,L)E.objects:push(N)N.Destroying:Connect(function()for O,P in pairs(E.unmounts.stack)do P()end end)end;for O,Q in pairs(E.events.stack)do Q.connection=N[Q.name]:Connect(Q.fn)end;return N end end;local function R(S,T,U,V)local W;local function X(Y)W=Y end;local Z=f:Create(S,TweenInfo.new(V.fn(U,X)),{[T]=U})if W then Z.Completed:Connect(W)end;Z:Play()return true end;local function _(a0,a1)local E=C()for r,s in pairs(a1)do if a(r)~='number'then local a2,a3=a(a0[r]),a(s)if a3=='table'then local a4=d(s)if a4 and a4.__type then if a4.__type=='Subscription'then s.represents.listeners[r]=function(a5)a0[r]=a5 end;a0[r]=s.value end else a0[r]=s end elseif a2~=a3 then a0[r]=s elseif E.animated[r]then for O,a6 in pairs(E.animations.stack)do if a6.name==r then R(a0,r,E.animated[r],a6)end end elseif a0[r]~=s then local a7={}for O,a6 in pairs(E.transitions.stack)do if a6.name==r then a7[r]=R(a0,r,s,a6)end end;if not a7[r]then a0[r]=s end end else s()end end;return a0 end;function g.useState(m)local E=C()local N,x=E.states:next()if N then return N.value,N.updater else local a8;a8=E.states:push({value=m,updater=function(a5)if E.states:at(x).value~=a5 then a8.value=a5;E.render()end end})return a8.value,a8.updater end end;function g.useEffect(F,a9)local E=C()local N=E.effects:next()if not N then E.effects:push({fn=F,states=a9 or{}})elseif a9 then for x=1,#a9 do if N.states[x]~=a9[x]then N.fn()break end end end end;function g.useEvent(aa,ab)local E=C()local N=E.events:next()if not N then E.events:push({name=aa,fn=ab})else N.connection:Disconnect()N.connection=nil;N.fn=ab end end;function g.useTransition(ac,ad)local E=C()local N=E.transitions:next()if not N then E.transitions:push({name=ac,fn=ad})end end;function g.useAnimation(ac,ad)local E=C()local N=E.animations:next()if not N then local ae;ae={name=ac,fn=ad,perform=function(a5)E.animated[ac]=a5 end}E.animations:push(ae)return ae.perform else return N.perform end end;local af={__type='Subscription',__call=function(o,ag)if not ag then return o.value else o.represents.updater(ag)return ag end end}function g.useSubscription(m)local E=C()local N,x=E.subscriptions:next()if N then return N.proxy,N.updater else local ah={}ah.listeners={}ah.value=m;ah.proxy=e({value=m,represents=ah},af)ah.updater=function(a5)if E.subscriptions:at(x).value~=a5 then ah.value=a5;ah.proxy.value=a5;for O,ai in pairs(ah.listeners)do ai(a5)end end end;E.subscriptions:push(ah)return ah.proxy,N.updater end end;function g.useTriggerableRender()return C().render end;function g.component(aj)return function(ak)local al={}if C()then local am=C()local N=am.subcomponents:next()if N then N.props=ak;return N.render else am.subcomponents:push(al)end end;al.prev=l(nil)al.props=ak;al.objects=v()al.states=v()al.effects=v()al.unmounts=v()al.events=v()al.transitions=v()al.animations=v()al.animated={}al.subcomponents=v()al.subscriptions=v()al.render=function()return coroutine.wrap(function()return D(al,function()al.objects:reset()al.states:reset()al.effects:reset()al.unmounts:reset()al.events:reset()al.transitions:reset()al.animations:reset()al.subcomponents:reset()al.subscriptions:reset()local K,an=aj(al.props)if a(K)~='string'or a(an)~='table'then error('Component renderer must return a classname and properties.')end;local M=I(K,an)_(M,an)if not al.prev.v then al.prev.v=M;for O,ao in pairs(al.effects.stack)do local P=ao.fn()if P and not al.unmounts:next()then al.unmounts:push(P)end end end;al.animated={}return M end)end)()end;return al.render end end;return g