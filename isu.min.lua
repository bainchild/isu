local a=typeof or type;local b=coroutine.running;local c=Instance.new;local pairs=pairs;local d=getmetatable;local e=setmetatable;local f=game:GetService("TweenService")local g={}local h={}local i={__mode='k'}local j={__mode='v'}local k={__mode='kv'}local function l(m)return e({v=m},j)end;e(h,i)local function n(o,p)local q={}for r,s in pairs(o)do local t,u=r,s;if a(r)=='table'and p then t=n(r,p)end;if a(s)=='table'and p then u=n(s,p)end;q[t]=u end;return q end;local function v()local w={stack={},coro=e({},k)}function w:index()return self.coro[b()]end;function w:at(x)return self.stack[x]end;function w:write(x,m)self.stack[x]=m end;function w:push(m)self.stack[#self.stack+1]=m;return m end;function w:reset()self.coro[b()]=0 end;function w:next()local y=b()self.coro[y]=self.coro[y]+1;return self:at(self.coro[y]),self.coro[y]end;function w:denote()if self.denotei then if self.denotei~=#self.stack then return error('Variadic accumulation has been detected during composition. Make sure that you are not conditionally invoking hooks (for instance, within an if statement).',2)end end;self.denotei=#self.stack end;return w end;local z={'objects','states','effects','unmounts','events','transitions','animations','subcomponents','subscriptions'}local function A(B,C)C=C or b()h[C]=B;return h[C]end;local function D(C)C=C or b()return h[C]end;local function E(F,G,...)local H=D()A(F)local I=G(...)A(H)return I end;local function J(K)return D().opts[K]or D().opts['enableAll']or error('"'..K..'" is not enabled in this component builder.')end;local L;do local function M(N,O)local P=c(N)for r,s in pairs(O)do if a(r)=='number'then s().Parent=P else if a(s)=='table'and d(s)and d(s).__type=='Subscription'then P[r]=s.value else P[r]=s end end end;return P end;function L(N,O)local F=D()local Q=F.objects:next()if not Q then O=O or{}Q=M(N,O)F.objects:push(Q)Q.Destroying:Connect(function()for R,S in pairs(F.unmounts.stack)do S()end end)end;for R,T in pairs(F.events.stack)do T.connection=Q[T.name]:Connect(T.fn)end;return Q end end;local function U(V,W,X,Y)local Z;local function _(a0)Z=a0 end;local a1=f:Create(V,TweenInfo.new(Y.fn(X,_)),{[W]=X})if Z then a1.Completed:Connect(Z)end;a1:Play()return true end;local function a2(a3,a4)local F=D()for r,s in pairs(a4)do if a(r)~='number'then local a5,a6=a(a3[r]),a(s)if a6=='table'then local a7=d(s)if a7 and a7.__type then if a7.__type=='Subscription'then s.represents.listeners[r]=function(a8)a3[r]=a8 end;a3[r]=s.value end else a3[r]=s end elseif a5~=a6 then a3[r]=s elseif F.animated[r]then for R,a9 in pairs(F.animations.stack)do if a9.name==r then U(a3,r,F.animated[r],a9)end end elseif a3[r]~=s then local aa={}for R,a9 in pairs(F.transitions.stack)do if a9.name==r then aa[r]=U(a3,r,s,a9)end end;if not aa[r]then a3[r]=s end end else s()end end;return a3 end;function g.useState(m)local F=D()local Q,x=F.states:next()if Q then return Q.value,Q.updater else local ab;ab=F.states:push({value=m,updater=function(a8)if F.states:at(x).value~=a8 then ab.value=a8;F.render()end end})return ab.value,ab.updater end end;function g.useEffect(G,ac)local F=D()local Q=F.effects:next()if not Q then F.effects:push({fn=G,states=ac or{}})elseif ac then for x=1,#ac do if Q.states[x]~=ac[x]then Q.fn()break end end end end;function g.useEvent(ad,ae)J('useEvent')local F=D()local Q=F.events:next()if not Q then F.events:push({name=ad,fn=ae})else Q.connection:Disconnect()Q.connection=nil;Q.fn=ae end end;function g.useTransition(af,ag)J('useTransition')local F=D()local Q=F.transitions:next()if not Q then F.transitions:push({name=af,fn=ag})end end;function g.useAnimation(af,ag)J('useAnimation')local F=D()local Q=F.animations:next()if not Q then local ah;ah={name=af,fn=ag,perform=function(a8)F.animated[af]=a8 end}F.animations:push(ah)return ah.perform else return Q.perform end end;local ai={__type='Subscription',__call=function(o,aj)if not aj then return o.value else o.represents.updater(aj)return aj end end}function g.useSubscription(m)J('useSubscription')local F=D()local Q,x=F.subscriptions:next()if Q then return Q.proxy,Q.updater else local ak={}ak.listeners={}ak.value=m;ak.proxy=e({value=m,represents=ak},ai)ak.updater=function(a8)if F.subscriptions:at(x).value~=a8 then ak.value=a8;ak.proxy.value=a8;for R,al in pairs(ak.listeners)do al(a8)end end end;F.subscriptions:push(ak)return ak.proxy,Q.updater end end;function g.useTriggerableRender()return D().render end;function g.builder(am,an,ao)ao=ao or{}return function(ap)return function(aq)local ar={opts=ao,prev=l(nil),props=aq,animated={}}if D()then local as=D()local Q=as.subcomponents:next()if Q then Q.props=aq;return Q.render else as.subcomponents:push(ar)end end;for R,a9 in pairs(z)do ar[a9]=v()end;ar.render=coroutine.wrap(function()while true do coroutine.yield(E(ar,function()for R,a9 in pairs(z)do ar[a9]:reset()end;local N,at=ap(ar.props)if a(N)~='string'or a(at)~='table'then error('Component renderer must return a classname and properties.')end;for R,a9 in pairs(z)do if a9~='objects'then ar[a9]:denote()end end;local P=am(N,at)an(P,at)if not ar.prev.v then ar.prev.v=P;for R,au in pairs(ar.effects.stack)do local S=au.fn()if S and not ar.unmounts:next()then ar.unmounts:push(S)end end end;if ao.useAnimation then ar.animated={}end;return P end))end end)return ar.render end end end;local av=g.builder(L,a2,{enableAll=true})function g.component(ap)return av(ap)end;return g